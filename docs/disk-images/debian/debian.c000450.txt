            line_buffering=False, write_through=False):
        self._encoding = encoding
        self._errors = errors
        self._encoder = None
        self._decoder = None
        self._b2cratio = 0.0

        self._readuniversal = not newline
        self._readtranslate = newline is None
        self._readnl = newline
        self._writetranslate = newline != ''
        self._writenl = newline or os.linesep

        self._line_buffering = line_buffering
        self._write_through = write_through

        # don't write a BOM in the middle of a file
        if self._seekable and self.writable():
            position = self.buffer.tell()
            if position != 0:
                try:
                    self._get_encoder().setstate(0)
                except LookupError:
                    # Sometimes the encoder doesn't exist
                    pass

    # self._snapshot is either None, or a tuple (dec_flags, next_input)
    # where dec_flags is the second (integer) item of the decoder state
    # and next_input is the chunk of input bytes that comes next after the
    # snapshot point.  We use this to reconstruct decoder states in tell().

    # Naming convention:
    #   - "bytes_..." for integer variables that count input bytes
    #   - "chars_..." for integer variables that count decoded characters

    def __repr__(self):
        result = "<{}.{}".format(self.__class__.__module__,
                                 self.__class__.__qualname__)
        try:
            name = self.name
        except AttributeError:
            pass
        else:
            result += " name={0!r}".format(name)
        try:
            mode = self.mode
        except AttributeError:
            pass
        else:
            result += " mode={0!r}".format(mode)
        return result + " encoding={0!r}>".format(self.encoding)

    @property
    def encoding(self):
        return self._encoding

    @property
    def errors(self):
        return self._errors

    @property
    def line_buffering(self):
        return self._line_buffering

    @property
    def write_through(self):
        return self._write_through

    @property
    def buffer(self):
        return self._buffer

    def reconfigure(self, *,
                    encoding=None, errors=None, newline=Ellipsis,
                    line_buffering=None, write_through=None):
        """Reconfigure the text stream with new parameters.

        This also flushes the stream.
        """
        if (self._decoder is not None
                and (encoding is not None or errors is not None
                     or newline is not Ellipsis)):
            raise UnsupportedOperation(
                "It is not possible to set the encoding or newline of stream "
                "after the first read")

        if errors is None:
            if encoding is None:
                errors = self._errors
            else:
                errors = 'strict'
        elif not isinstance(errors, str):
            raise TypeError("invalid errors: %r" % errors)

        if encoding is None:
            encoding = self._encoding
        else:
            if not isinstance(encoding, str):
                raise TypeError("invalid encoding: %r" % encoding)
            if encoding == "locale":
                encoding = self._get_locale_encoding()

        if newline is Ellipsis:
            newline = self._readnl
        self._check_newline(newline)

        if line_buffering is None:
            line_buffering = self.line_buffering
        if write_through is None:
            write_through = self.write_through

        self.flush()
        self._configure(encoding, errors, newline,
                        line_buffering, write_through)

    def seekable(self):
        if self.closed:
            raise ValueError("I/O operation on closed file.")
        return self._seekable

    def readable(self):
        return self.buffer.readable()

    def writable(self):
        return self.buffer.writable()

    def flush(self):
        self.buffer.flush()
        self._telling = self._seekable

    def close(self):
        if self.buffer is not None and not self.closed:
            try:
                self.flush()
            finally:
                self.buffer.close()

    @property
    def closed(self):
        return self.buffer.closed

    @property
    def name(self):
        return self.buffer.name

    def fileno(self):
        return self.buffer.fileno()

    def isatty(self):
        return self.buffer.isatty()

    def write(self, s):
        'Write data, where s is a str'
        if self.closed:
            raise ValueError("write to closed file")
        if not isinstance(s, str):
            raise TypeError("can't write %s to text stream" %
                            s.__class__.__name__)
        length = len(s)
        haslf = (self._writetranslate or self._line_buffering) and "\n" in s
        if haslf and self._writetranslate and self._writenl != "\n":
            s = s.replace("\n", self._writenl)
        encoder = self._encoder or self._get_encoder()
        # XXX What if we were just reading?
        b = encoder.encode(s)
        self.buffer.write(b)
        if self._line_buffering and (haslf or "\r" in s):
            self.flush()
        if self._snapshot is not None:
            self._set_decoded_chars('')
            self._snapshot = None
        if self._decoder:
            self._decoder.reset()
        return length

    def _get_encoder(self):
        make_encoder = codecs.getincrementalencoder(self._encoding)
        self._encoder = make_encoder(self._errors)
        return self._encoder

    def _get_decoder(self):
        make_decoder = codecs.getincrementaldecoder(self._encoding)
        decoder = make_decoder(self._errors)
        if self._readuniversal:
            decoder = IncrementalNewlineDecoder(decoder, self._readtranslate)
        self._decoder = decoder
        return decoder

    # The following three methods implement an ADT for _decoded_chars.
    # Text returned from the decoder is buffered here until the client
    # requests it by calling our read() or readline() method.
    def _set_decoded_chars(self, chars):
        """Set the _decoded_chars buffer."""
        self._decoded_chars = chars
        self._decoded_chars_used = 0

    def _get_decoded_chars(self, n=None):
        """Advance into the _decoded_chars buffer."""
        offset = self._decoded_chars_used
        if n is None:
            chars = self._decoded_chars[offset:]
        else:
            chars = self._decoded_chars[offset:offset + n]
        self._decoded_chars_used += len(chars)
        return chars

    def _get_locale_encoding(self):
        try:
            import locale
        except ImportError:
            # Importing locale may fail if Python is being built
            return "utf-8"
        else:
            return locale.getencoding()

    def _rewind_decoded_chars(self, n):
        """Rewind the _decoded_chars buffer."""
        if self._decoded_chars_used < n:
            raise AssertionError("rewind decoded_chars out of bounds")
        self._decoded_chars_used -= n

    def _read_chunk(self):
        """
        Read and decode the next chunk of data from the BufferedReader.
        """

        # The return value is True unless EOF was reached.  The decoded
        # string is placed in self._decoded_chars (replacing its previous
        # value).  The entire input chunk is sent to the decoder, though
        # some of it may remain buffered in the decoder, yet to be
        # converted.

        if self._decoder is None:
            raise ValueError("no decoder")

        if self._telling:
            # To prepare for tell(), we need to snapshot a point in the
            # file where the decoder's input buffer is empty.

            dec_buffer, dec_flags = self._decoder.getstate()
            # Given this, we know there was a valid snapshot point
            # len(dec_buffer) bytes ago with decoder state (b'', dec_flags).

        # Read a chunk, decode it, and put the result in self._decoded_chars.
        if self._has_read1:
            input_chunk = self.buffer.read1(self._CHUNK_SIZE)
        else:
            input_chunk = self.buffer.read(self._CHUNK_SIZE)
        eof = not input_chunk
        decoded_chars = self._decoder.decode(input_chunk, eof)
        self._set_decoded_chars(decoded_chars)
        if decoded_chars:
            self._b2cratio = len(input_chunk) / len(self._decoded_chars)
        else:
            self._b2cratio = 0.0

        if self._telling:
            # At the snapshot point, len(dec_buffer) bytes before the read,
            # the next input to be decoded is dec_buffer + input_chunk.
            self._snapshot = (dec_flags, dec_buffer + input_chunk)

        return not eof

    def _pack_cookie(self, position, dec_flags=0,
                           bytes_to_feed=0, need_eof=False, chars_to_skip=0):
        # The meaning of a tell() cookie is: seek to position, set the
        # decoder flags to dec_flags, read bytes_to_feed bytes, feed them
        # into the decoder with need_eof as the EOF flag, then skip
        # chars_to_skip characters of the decoded result.  For most simple
        # decoders, tell() will often just give a byte offset in the file.
        return (position | (dec_flags<<64) | (bytes_to_feed<<128) |
               (chars_to_skip<<192) | bool(need_eof)<<256)

    def _unpack_cookie(self, bigint):
        rest, position = divmod(bigint, 1<<64)
        rest, dec_flags = divmod(rest, 1<<64)
        rest, bytes_to_feed = divmod(rest, 1<<64)
        need_eof, chars_to_skip = divmod(rest, 1<<64)
        return position, dec_flags, bytes_to_feed, bool(need_eof), chars_to_skip

    def tell(self):
        if not self._seekable:
            raise UnsupportedOperation("underlying stream is not seekable")
        if not self._telling:
            raise OSError("telling position disabled by next() call")
        self.flush()
        position = self.buffer.tell()
        decoder = self._decoder
        if decoder is None or self._snapshot is None:
            if self._decoded_chars:
                # This should never happen.
                raise AssertionError("pending decoded text")
            return position

        # Skip backward to the snapshot point (see _read_chunk).
        dec_flags, next_input = self._snapshot
        position -= len(next_input)

        # How many decoded characters have been used up since the snapshot?
        chars_to_skip = self._decoded_chars_used
        if chars_to_skip == 0:
            # We haven't moved from the snapshot point.
            return self._pack_cookie(position, dec_flags)

        # Starting from the snapshot position, we will walk the decoder
        # forward until it gives us enough decoded characters.
        saved_state = decoder.getstate()
        try:
            # Fast search for an acceptable start point, close to our
            # current pos.
            # Rationale: calling decoder.decode() has a large overhead
            # regardless of chunk size; we want the number of such calls to
            # be O(1) in most situations (common decoders, sensible input).
            # Actually, it will be exactly 1 for fixed-size codecs (all
            # 8-bit codecs, also UTF-16 and UTF-32).
            skip_bytes = int(self._b2cratio * chars_to_skip)
            skip_back = 1
            assert skip_bytes <= len(next_input)
            while skip_bytes > 0:
                decoder.setstate((b'', dec_flags))
                # Decode up to temptative start point
                n = len(decoder.decode(next_input[:skip_bytes]))
                if n <= chars_to_skip:
                    b, d = decoder.getstate()
                    if not b:
                        # Before pos and no bytes buffered in decoder => OK
                        dec_flags = d
                        chars_to_skip -= n
                        break
                    # Skip back by buffered amount and reset heuristic
                    skip_bytes -= len(b)
                    skip_back = 1
                else:
                    # We're too far ahead, skip back a bit
                    skip_bytes -= skip_back
                    skip_back = skip_back * 2
            else:
                skip_bytes = 0
                decoder.setstate((b'', dec_flags))

            # Note our initial start point.
            start_pos = position + skip_bytes
            start_flags = dec_flags
            if chars_to_skip == 0:
                # We haven't moved from the start point.
                return self._pack_cookie(start_pos, start_flags)

            # Feed the decoder one byte at a time.  As we go, note the
            # nearest "safe start point" before the current location
            # (a point where the decoder has nothing buffered, so seek()
            # can safely start from there and advance to this location).
            bytes_fed = 0
            need_eof = False
            # Chars decoded since `start_pos`
            chars_decoded = 0
            for i in range(skip_bytes, len(next_input)):
                bytes_fed += 1
                chars_decoded += len(decoder.decode(next_input[i:i+1]))
                dec_buffer, dec_flags = decoder.getstate()
                if not dec_buffer and chars_decoded <= chars_to_skip:
                    # Decoder buffer is empty, so this is a safe start point.
                    start_pos += bytes_fed
                    chars_to_skip -= chars_decoded
                    start_flags, bytes_fed, chars_decoded = dec_flags, 0, 0
                if chars_decoded >= chars_to_skip:
                    break
            else:
                # We didn't get enough decoded data; signal EOF to get more.
                chars_decoded += len(decoder.decode(b'', final=True))
                need_eof = True
                if chars_decoded < chars_to_skip:
                    raise OSError("can't reconstruct logical file position")

            # The returned cookie corresponds to the last safe start point.
            return self._pack_cookie(
                start_pos, start_flags, bytes_fed, need_eof, chars_to_skip)
        finally:
            decoder.setstate(saved_state)

    def truncate(self, pos=None):
        self.flush()
        if pos is None:
            pos = self.tell()
        return self.buffer.truncate(pos)

    def detach(self):
        if self.buffer is None:
            raise ValueError("buffer is already detached")
        self.flush()
        buffer = self._buffer
        self._buffer = None
        return buffer

    def seek(self, cookie, whence=0):
        def _reset_encoder(position):
            """Reset the encoder (merely useful for proper BOM handling)"""
            try:
                encoder = self._encoder or self._get_encoder()
            except LookupError:
                # Sometimes the encoder doesn't exist
                pass
            else:
                if position != 0:
                    encoder.setstate(0)
                else:
                    encoder.reset()

        if self.closed:
            raise ValueError("tell on closed file")
        if not self._seekable:
            raise UnsupportedOperation("underlying stream is not seekable")
        if whence == SEEK_CUR:
            if cookie != 0:
                raise UnsupportedOperation("can't do nonzero cur-relative seeks")
            # Seeking to the current position should attempt to
            # sync the underlying buffer with the current position.
            whence = 0
            cookie = self.tell()
        elif whence == SEEK_END:
            if cookie != 0:
                raise UnsupportedOperation("can't do nonzero end-relative seeks")
            self.flush()
            position = self.buffer.seek(0, whence)
            self._set_decoded_chars('')
            self._snapshot = None
            if self._decoder:
                self._decoder.reset()
            _reset_encoder(position)
            return position
        if whence != 0:
            raise ValueError("unsupported whence (%r)" % (whence,))
        if cookie < 0:
            raise ValueError("negative seek position %r" % (cookie,))
        self.flush()

        # The strategy of seek() is to go back to the safe start point
        # and replay the effect of read(chars_to_skip) from there.
        start_pos, dec_flags, bytes_to_feed, need_eof, chars_to_skip = \
            self._unpack_cookie(cookie)

        # Seek back to the safe start point.
        self.buffer.seek(start_pos)
        self._set_decoded_chars('')
        self._snapshot = None

        # Restore the decoder to its state from the safe start point.
        if cookie == 0 and self._decoder:
            self._decoder.reset()
        elif self._decoder or dec_flags or chars_to_skip:
            self._decoder = self._decoder or self._get_decoder()
            self._decoder.setstate((b'', dec_flags))
            self._snapshot = (dec_flags, b'')

        if chars_to_skip:
            # Just like _read_chunk, feed the decoder and save a snapshot.
            input_chunk = self.buffer.read(bytes_to_feed)
            self._set_decoded_chars(
                self._decoder.decode(input_chunk, need_eof))
            self._snapshot = (dec_flags, input_chunk)

            # Skip chars_to_skip of the decoded characters.
            if len(self._decoded_chars) < chars_to_skip:
                raise OSError("can't restore logical file position")
            self._decoded_chars_used = chars_to_skip

        _reset_encoder(cookie)
        return cookie

    def read(self, size=None):
        self._checkReadable()
        if size is None:
            size = -1
        else:
            try:
                size_index = size.__index__
            except AttributeError:
                raise TypeError(f"{size!r} is not an integer")
            else:
                size = size_index()
        decoder = self._decoder or self._get_decoder()
        if size < 0:
            # Read everything.
            result = (self._get_decoded_chars() +
                      decoder.decode(self.buffer.read(), final=True))
            if self._snapshot is not None:
                self._set_decoded_chars('')
                self._snapshot = None
            return result
        else:
            # Keep reading chunks until we have size characters to return.
            eof = False
            result = self._get_decoded_chars(size)
            while len(result) < size and not eof:
                eof = not self._read_chunk()
                result += self._get_decoded_chars(size - len(result))
            return result

    def __next__(self):
        self._telling = False
        line = self.readline()
        if not line:
            self._snapshot = None
            self._telling = self._seekable
            raise StopIteration
        return line

    def readline(self, size=None):
        if self.closed:
            raise ValueError("read from closed file")
        if size is None:
            size = -1
        else:
            try:
                size_index = size.__index__
            except AttributeError:
                raise TypeError(f"{size!r} is not an integer")
            else:
                size = size_index()

        # Grab all the decoded text (we will rewind any extra bits later).
        line = self._get_decoded_chars()

        start = 0
        # Make the decoder if it doesn't already exist.
        if not self._decoder:
            self._get_decoder()

        pos = endpos = None
        while True:
            if self._readtranslate:
                # Newlines are already translated, only search for \n
                pos = line.find('\n', start)
                if pos >= 0:
                    endpos = pos + 1
                    break
                else:
                    start = len(line)

            elif self._readuniversal:
                # Universal newline search. Find any of \r, \r\n, \n
                # The decoder ensures that \r\n are not split in two pieces

                # In C we'd look for these in parallel of course.
                nlpos = line.find("\n", start)
                crpos = line.find("\r", start)
                if crpos == -1:
                    if nlpos == -1:
                        # Nothing found
                        start = len(line)
                    else:
                        # Found \n
                        endpos = nlpos + 1
                        break
                elif nlpos == -1:
                    # Found lone \r
                    endpos = crpos + 1
                    break
                elif nlpos < crpos:
                    # Found \n
                    endpos = nlpos + 1
                    break
                elif nlpos == crpos + 1:
                    # Found \r\n
                    endpos = crpos + 2
                    break
                else:
                    # Found \r
                    endpos = crpos + 1
                    break
            else:
                # non-universal
                pos = line.find(self._readnl)
                if pos >= 0:
                    endpos = pos + len(self._readnl)
                    break

            if size >= 0 and len(line) >= size:
                endpos = size  # reached length size
                break

            # No line ending seen yet - get more data'
            while self._read_chunk():
                if self._decoded_chars:
                    break
            if self._decoded_chars:
                line += self._get_decoded_chars()
            else:
                # end of file
                self._set_decoded_chars('')
                self._snapshot = None
                return line

        if size >= 0 and endpos > size:
            endpos = size  # don't exceed size

        # Rewind _decoded_chars to just after the line ending we found.
        self._rewind_decoded_chars(len(line) - endpos)
        return line[:endpos]

    @property
    def newlines(self):
        return self._decoder.newlines if self._decoder else None

    def _dealloc_warn(self, source):
        if dealloc_warn := getattr(self.buffer, "_dealloc_warn", None):
            dealloc_warn(source)


class StringIO(TextIOWrapper):
    """Text I/O implementation using an in-memory buffer.

    The initial_value argument sets the value of object.  The newline
    argument is like the one of TextIOWrapper's constructor.
    """

    def __init__(self, initial_value="", newline="\n"):
        super(StringIO, self).__init__(BytesIO(),
                                       encoding="utf-8",
                                       errors="surrogatepass",
                                       newline=newline)
        # Issue #5645: make universal newlines semantics the same as in the
        # C version, even under Windows.
        if newline is None:
            self._writetranslate = False
        if initial_value is not None:
            if not isinstance(initial_value, str):
                raise TypeError("initial_value must be str or None, not {0}"
                                .format(type(initial_value).__name__))
            self.write(initial_value)
            self.seek(0)

    def getvalue(self):
        self.flush()
        decoder = self._decoder or self._get_decoder()
        old_state = decoder.getstate()
        decoder.reset()
        try:
            return decoder.decode(self.buffer.getvalue(), final=True)
        finally:
            decoder.setstate(old_state)

    def __repr__(self):
        # TextIOWrapper tells the encoding in its repr. In StringIO,
        # that's an implementation detail.
        return object.__repr__(self)

    @property
    def errors(self):
        return None

    @property
    def encoding(self):
        return None

    def detach(self):
        # This doesn't make sense on StringIO.
        self._unsupported("detach")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   """Python implementations of some algorithms for use by longobject.c.
The goal is to provide asymptotically faster algorithms that can be
used for operations on integers with many digits.  In those cases, the
performance overhead of the Python implementation is not significant
since the asymptotic behavior is what dominates runtime. Functions
provided by this module should be considered private and not part of any
public API.

Note: for ease of maintainability, please prefer clear code and avoid
"micro-optimizations".  This module will only be imported and used for
integers with a huge number of digits.  Saving a few microseconds with
tricky or non-obvious code is not worth it.  For people looking for
maximum performance, they should use something like gmpy2."""

import re
import decimal
try:
    import _decimal
except ImportError:
    _decimal = None

# A number of functions have this form, where `w` is a desired number of
# digits in base `base`:
#
#    def inner(...w...):
#        if w <= LIMIT:
#            return something
#        lo = w >> 1
#        hi = w - lo
#        something involving base**lo, inner(...lo...), j, and inner(...hi...)
#    figure out largest w needed
#    result = inner(w)
#
# They all had some on-the-fly scheme to cache `base**lo` results for reuse.
# Power is costly.
#
# This routine aims to compute all amd only the needed powers in advance, as
# efficiently as reasonably possible. This isn't trivial, and all the
# on-the-fly methods did needless work in many cases. The driving code above
# changes to:
#
#    figure out largest w needed
#    mycache = compute_powers(w, base, LIMIT)
#    result = inner(w)
#
# and `mycache[lo]` replaces `base**lo` in the inner function.
#
# While this does give minor speedups (a few percent at best), the primary
# intent is to simplify the functions using this, by eliminating the need for
# them to craft their own ad-hoc caching schemes.
def compute_powers(w, base, more_than, show=False):
    seen = set()
    need = set()
    ws = {w}
    while ws:
        w = ws.pop() # any element is fine to use next
        if w in seen or w <= more_than:
            continue
        seen.add(w)
        lo = w >> 1
        # only _need_ lo here; some other path may, or may not, need hi
        need.add(lo)
        ws.add(lo)
        if w & 1:
            ws.add(lo + 1)

    d = {}
    if not need:
        return d
    it = iter(sorted(need))
    first = next(it)
    if show:
        print("pow at", first)
    d[first] = base ** first
    for this in it:
        if this - 1 in d:
            if show:
                print("* base at", this)
            d[this] = d[this - 1] * base # cheap
        else:
            lo = this >> 1
            hi = this - lo
            assert lo in d
            if show:
                print("square at", this)
            # Multiplying a bigint by itself (same object!) is about twice
            # as fast in CPython.
            sq = d[lo] * d[lo]
            if hi != lo:
                assert hi == lo + 1
                if show:
                    print("    and * base")
                sq *= base
            d[this] = sq
    return d

_unbounded_dec_context = decimal.getcontext().copy()
_unbounded_dec_context.prec = decimal.MAX_PREC
_unbounded_dec_context.Emax = decimal.MAX_EMAX
_unbounded_dec_context.Emin = decimal.MIN_EMIN
_unbounded_dec_context.traps[decimal.Inexact] = 1 # sanity check

def int_to_decimal(n):
    """Asymptotically fast conversion of an 'int' to Decimal."""

    # Function due to Tim Peters.  See GH issue #90716 for details.
    # https://github.com/python/cpython/issues/90716
    #
    # The implementation in longobject.c of base conversion algorithms
    # between power-of-2 and non-power-of-2 bases are quadratic time.
    # This function implements a divide-and-conquer algorithm that is
    # faster for large numbers.  Builds an equal decimal.Decimal in a
    # "clever" recursive way.  If we want a string representation, we
    # apply str to _that_.

    from decimal import Decimal as D
    BITLIM = 200

    # Don't bother caching the "lo" mask in this; the time to compute it is
    # tiny compared to the multiply.
    def inner(n, w):
        if w <= BITLIM:
            return D(n)
        w2 = w >> 1
        hi = n >> w2
        lo = n & ((1 << w2) - 1)
        return inner(lo, w2) + inner(hi, w - w2) * w2pow[w2]

    with decimal.localcontext(_unbounded_dec_context):
        nbits = n.bit_length()
        w2pow = compute_powers(nbits, D(2), BITLIM)
        if n < 0:
            negate = True
            n = -n
        else:
            negate = False
        result = inner(n, nbits)
        if negate:
            result = -result
    return result

def int_to_decimal_string(n):
    """Asymptotically fast conversion of an 'int' to a decimal string."""
    w = n.bit_length()
    if w > 450_000 and _decimal is not None:
        # It is only usable with the C decimal implementation.
        # _pydecimal.py calls str() on very large integers, which in its
        # turn calls int_to_decimal_string(), causing very deep recursion.
        return str(int_to_decimal(n))

    # Fallback algorithm for the case when the C decimal module isn't
    # available.  This algorithm is asymptotically worse than the algorithm
    # using the decimal module, but better than the quadratic time
    # implementation in longobject.c.

    DIGLIM = 1000
    def inner(n, w):
        if w <= DIGLIM:
            return str(n)
        w2 = w >> 1
        hi, lo = divmod(n, pow10[w2])
        return inner(hi, w - w2) + inner(lo, w2).zfill(w2)

    # The estimation of the number of decimal digits.
    # There is no harm in small error.  If we guess too large, there may
    # be leading 0's that need to be stripped.  If we guess too small, we
    # may need to call str() recursively for the remaining highest digits,
    # which can still potentially be a large integer. This is manifested
    # only if the number has way more than 10**15 digits, that exceeds
    # the 52-bit physical address limit in both Intel64 and AMD64.
    w = int(w * 0.3010299956639812 + 1)  # log10(2)
    pow10 = compute_powers(w, 5, DIGLIM)
    for k, v in pow10.items():
        pow10[k] = v << k # 5**k << k == 5**k * 2**k == 10**k
    if n < 0:
        n = -n
        sign = '-'
    else:
        sign = ''
    s = inner(n, w)
    if s[0] == '0' and n:
        # If our guess of w is too large, there may be leading 0's that
        # need to be stripped.
        s = s.lstrip('0')
    return sign + s

def _str_to_int_inner(s):
    """Asymptotically fast conversion of a 'str' to an 'int'."""

    # Function due to Bjorn Martinsson.  See GH issue #90716 for details.
    # https://github.com/python/cpython/issues/90716
    #
    # The implementation in longobject.c of base conversion algorithms
    # between power-of-2 and non-power-of-2 bases are quadratic time.
    # This function implements a divide-and-conquer algorithm making use
    # of Python's built in big int multiplication. Since Python uses the
    # Karatsuba algorithm for multiplication, the time complexity
    # of this function is O(len(s)**1.58).

    DIGLIM = 2048

    def inner(a, b):
        if b - a <= DIGLIM:
            return int(s[a:b])
        mid = (a + b + 1) >> 1
        return (inner(mid, b)
                + ((inner(a, mid) * w5pow[b - mid])
                    << (b - mid)))

    w5pow = compute_powers(len(s), 5, DIGLIM)
    return inner(0, len(s))


def int_from_string(s):
    """Asymptotically fast version of PyLong_FromString(), conversion
    of a string of decimal digits into an 'int'."""
    # PyLong_FromString() has already removed leading +/-, checked for invalid
    # use of underscore characters, checked that string consists of only digits
    # and underscores, and stripped leading whitespace.  The input can still
    # contain underscores and have trailing whitespace.
    s = s.rstrip().replace('_', '')
    return _str_to_int_inner(s)

def str_to_int(s):
    """Asymptotically fast version of decimal string to 'int' conversion."""
    # FIXME: this doesn't support the full syntax that int() supports.
    m = re.match(r'\s*([+-]?)([0-9_]+)\s*', s)
    if not m:
        raise ValueError('invalid literal for int() with base 10')
    v = int_from_string(m.group(2))
    if m.group(1) == '-':
        v = -v
    return v


# Fast integer division, based on code from Mark Dickinson, fast_div.py
# GH-47701. Additional refinements and optimizations by Bjorn Martinsson.  The
# algorithm is due to Burnikel and Ziegler, in their paper "Fast Recursive
# Division".

_DIV_LIMIT = 4000


def _div2n1n(a, b, n):
    """Divide a 2n-bit nonnegative integer a by an n-bit positive integer
    b, using a recursive divide-and-conquer algorithm.

    Inputs:
      n is a positive integer
      b is a positive integer with exactly n bits
      a is a nonnegative integer such that a < 2**n * b

    Output:
      (q, r) such that a = b*q+r and 0 <= r < b.

    """
    if a.bit_length() - n <= _DIV_LIMIT:
        return divmod(a, b)
    pad = n & 1
    if pad:
        a <<= 1
        b <<= 1
        n += 1
    half_n = n >> 1
    mask = (1 << half_n) - 1
    b1, b2 = b >> half_n, b & mask
    q1, r = _div3n2n(a >> n, (a >> half_n) & mask, b, b1, b2, half_n)
    q2, r = _div3n2n(r, a & mask, b, b1, b2, half_n)
    if pad:
        r >>= 1
    return q1 << half_n | q2, r


def _div3n2n(a12, a3, b, b1, b2, n):
    """Helper function for _div2n1n; not intended to be called directly."""
    if a12 >> n == b1:
        q, r = (1 << n) - 1, a12 - (b1 << n) + b1
    else:
        q, r = _div2n1n(a12, b1, n)
    r = (r << n | a3) - q * b2
    while r < 0:
        q -= 1
        r += b
    return q, r


def _int2digits(a, n):
    """Decompose non-negative int a into base 2**n

    Input:
      a is a non-negative integer

    Output:
      List of the digits of a in base 2**n in little-endian order,
      meaning the most significant digit is last. The most
      significant digit is guaranteed to be non-zero.
      If a is 0 then the output is an empty list.

    """
    a_digits = [0] * ((a.bit_length() + n - 1) // n)

    def inner(x, L, R):
        if L + 1 == R:
            a_digits[L] = x
            return
        mid = (L + R) >> 1
        shift = (mid - L) * n
        upper = x >> shift
        lower = x ^ (upper << shift)
        inner(lower, L, mid)
        inner(upper, mid, R)

    if a:
        inner(a, 0, len(a_digits))
    return a_digits


def _digits2int(digits, n):
    """Combine base-2**n digits into an int. This function is the
    inverse of `_int2digits`. For more details, see _int2digits.
    """

    def inner(L, R):
        if L + 1 == R:
            return digits[L]
        mid = (L + R) >> 1
        shift = (mid - L) * n
        return (inner(mid, R) << shift) + inner(L, mid)

    return inner(0, len(digits)) if digits else 0


def _divmod_pos(a, b):
    """Divide a non-negative integer a by a positive integer b, giving
    quotient and remainder."""
    # Use grade-school algorithm in base 2**n, n = nbits(b)
    n = b.bit_length()
    a_digits = _int2digits(a, n)

    r = 0
    q_digits = []
    for a_digit in reversed(a_digits):
        q_digit, r = _div2n1n((r << n) + a_digit, b, n)
        q_digits.append(q_digit)
    q_digits.reverse()
    q = _digits2int(q_digits, n)
    return q, r


def int_divmod(a, b):
    """Asymptotically fast replacement for divmod, for 'int'.
    Its time complexity is O(n**1.58), where n = #bits(a) + #bits(b).
    """
    if b == 0:
        raise ZeroDivisionError
    elif b < 0:
        q, r = int_divmod(-a, -b)
        return q, -r
    elif a < 0:
        q, r = int_divmod(~a, b)
        return ~q, b + ~r
    else:
        return _divmod_pos(a, b)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ³	   .   ú   ..  ´	   __init__.py µ	   __main__.py ¶	   __pycache__ Ð	   _minimal_curses.py  Ñ	    _threading_handler.py   Ò	   base_eventqueue.py  Ó	   commands.py Ô	   completing_reader.pyÕ	   
console.py  Ö	   	curses.py   ×	   fancy_termios.pyØ	   historical_reader.pyÙ	   input.pyÚ	   	keymap.py   Û	   main.py Ü	   mypy.iniÝ	   pager.pyÞ	   	reader.py   ß	   readline.py à	   simple_interact.py  á	   trace.pyâ	   types.pyã	   unix_console.py ä	   unix_eventqueue.py  å	   utils.pyæ	   windows_console.py  ç	  °windows_eventqueue.py                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   #   Copyright 2000-2008 Michael Hudson-Doyle <micahel@gmail.com>
#                       Armin Rigo
#
#                        All Rights Reserved
#
#
# Permission to use, copy, modify, and distribute this software and
# its documentation for any purpose is hereby granted without fee,
# provided that the above copyright notice appear in all copies and
# that both that copyright notice and this permission notice appear in
# supporting documentation.
#
# THE AUTHOR MICHAEL HUDSON DISCLAIMS ALL WARRANTIES WITH REGARD TO
# THIS SOFTWARE, INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
# AND FITNESS, IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL,
# INDIRECT OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER
# RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF
# CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN
# CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   # Important: don't add things to this module, as they will end up in the REPL's
# default globals.  Use _pyrepl.main instead.

# Avoid caching this file by linecache and incorrectly report tracebacks.
# See https://github.com/python/cpython/issues/129098.
__spec__ = __loader__ = None

if __name__ == "__main__":
    from .main import interactive_console as __pyrepl_interactive_console
    __pyrepl_interactive_console()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ¶	   .   ³	   ..  ·	    __init__.cpython-313.pyc¸	    __main__.cpython-313.pyc¹	  ( _minimal_curses.cpython-313.pyc º	  , "_threading_handler.cpython-313.pyc  »	  ( base_eventqueue.cpython-313.pyc ¼	    commands.cpython-313.pyc½	  , !completing_reader.cpython-313.pyc   ¾	    console.cpython-313.pyc ¿	    curses.cpython-313.pyc  À	  ( fancy_termios.cpython-313.pyc   Á	  , !historical_reader.cpython-313.pyc   Â	    input.cpython-313.pyc   Ã	    keymap.cpython-313.pyc  Ä	   main.cpython-313.pycÅ	    pager.cpython-313.pyc   Æ	    reader.cpython-313.pyc  Ç	    readline.cpython-313.pycÈ	  ( simple_interact.cpython-313.pyc É	    trace.cpython-313.pyc   Ê	    types.cpython-313.pyc   Ë	  $ unix_console.cpython-313.pycÌ	  ( unix_eventqueue.cpython-313.pyc Í	    utils.cpython-313.pyc   Î	  ( windows_console.cpython-313.pyc Ï	  "windows_eventqueue.cpython-313.pyc                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ó
    F\h  ã                   ó    g )N© r   ó    Ú'/usr/lib/python3.13/_pyrepl/__init__.pyÚ<module>r      s   ñr                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           ó
    F\h¦  ã                   ó4    S =r r\S:X  a  SSKJr  \" 5         g g )NÚ__main__é   )Úinteractive_console)Ú__spec__Ú
__loader__Ú__name__Úmainr   Ú__pyrepl_interactive_console© ó    Ú'/usr/lib/python3.13/_pyrepl/__main__.pyÚ<module>r      s'   ðð Ð :àzÓÝIÙ Õ"ð r                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             ó
    F\h4  ã                   óV   S r SSKrSSKr " S S\5      rS\4S jr\" 5       r\R                  R                  \5      r
\R                  \R                  \R                  " \R                  5      /\
R                  l        \R                  \
R                  l        \R                  /\
R"                  l        \R$                  \
R"                  l        \R                  /S\R                  /-  -   \
R&                  l        \R                  \
R&                  l        SrSrS	 rS
 rSS jrg)ak  Minimal '_curses' module, the low-level interface for curses module
which is not meant to be used directly.

Based on ctypes.  It's too incomplete to be really called '_curses', so
to use it, you have to import it and stick it in sys.modules['_curses']
manually.

Note that there is also a built-in module _minimal_curses which will
hide this one if compiled in.
é    Nc                   ó    \ rS rSrSrg)Úerroré   © N)Ú__name__Ú
__module__Ú__qualname__Ú__firstlineno__Ú__static_attributes__r   ó    Ú./usr/lib/python3.13/_pyrepl/_minimal_curses.pyr   r      s    Úr   r   Úreturnc                  ó    / SQn U  H-  n[         R                  R                  U5      nU(       d  M+  Us  $    [        SSS9e)N)ÚncurseswÚncursesÚcurseszcurses library not foundz_pyrepl._minimal_curses)Úname)ÚctypesÚutilÚfind_libraryÚModuleNotFoundError)ÚtrylibsÚlibÚpaths      r   Ú
_find_clibr      s@    Ú/GãÜ{{×'Ñ'¨Ó,ß4ØKñ ô Ð8Ð?XÑ
YÐYr   é	   éÿÿÿÿc                 óÈ    [         R                  " S5      n[        R                  X[         R                  " U5      5      nU[
        :X  a  [        SUR                  -  5      eg )Nr   zsetupterm() failed (err=%d))r   Úc_intÚclibÚ	setuptermÚbyrefÚERRr   Úvalue)ÚtermstrÚfdÚerrÚresults       r   r!   r!   0   sI    Ü
,,q/CÜ^^G¬¯ª°cÓ):Ó;FØ}ÜÐ1°C·I±IÑ=Ó>Ð>ð r   c                 óì    [        U [        5      (       d  U R                  S5      n [        R	                  U 5      nU[
        :X  a  g [        R                  " U[        R                  5      R                  $ )NÚascii)
Ú
isinstanceÚbytesÚencoder    Útigetstrr#   r   ÚcastÚc_char_pr$   )Úcapr(   s     r   r.   r.   7   sP    Üc5×!Ñ!ØjjÓ!Ü]]3ÓFØ}ØÜ;;vvÓ/×5Ñ5Ð5r   c
                 óT    [         R                  XX#XEXgX5
      n
U
c  [        S5      eU
$ )Nztparm() returned NULL)r    Útparmr   )ÚstrÚi1Úi2Úi3Úi4Úi5Úi6Úi7Úi8Úi9r(   s              r   r3   r3   @   s.    ÜZZ ¨°¸Ó@FØ~ÜÐ+Ó,Ð,ØMr   )	r   r   r   r   r   r   r   r   r   )Ú__doc__r   Úctypes.utilÚ	Exceptionr   r4   r   Ú	_clibpathÚcdllÚLoadLibraryr    r0   r   ÚPOINTERr!   ÚargtypesÚrestyper.   Ú	c_ssize_tr3   ÚOKr#   r   r   r   Ú<module>rI      sò   ðñ	ó Û ô	Iô 	ðZCô Zñ L	Ø{{×ÑyÓ)à!??¨F¯L©L¸&¿.º.ÈÏÉÓ:VÐWÔ ØÔ à //Ð*Ô Ø×(Ñ(Ô àÐ'¨!¨v¯|©|¨nÑ*<Ñ<

Ô Ø__

Ô àØò
?ò6õr                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ó
    F\hz  ã                  ó     S SK Jr  S SKJrJr  S SKrSr\(       a.  S SKJr  S SK	J
r
  S SKJr   " S S	\5      r " S
 S\5      rSSKJr  SS jrg)é    )Úannotations)Ú	dataclassÚfieldNF)ÚThread)ÚTracebackType)ÚProtocolc                  ód    \ rS rSr\SS j5       r\S	S j5       r\S
S j5       r\SS j5       rSr	g)ÚExceptHookArgsé   c                ó    g ©N© ©Úselfs    Ú1/usr/lib/python3.13/_pyrepl/_threading_handler.pyÚexc_typeÚExceptHookArgs.exc_type   s    Ø36ó    c                ó    g r   r   r   s    r   Ú	exc_valueÚExceptHookArgs.exc_value   s    Ø58r   c                ó    g r   r   r   s    r   Úexc_tracebackÚExceptHookArgs.exc_traceback   s    Ø9<r   c                ó    g r   r   r   s    r   ÚthreadÚExceptHookArgs.thread   s    Ø+.r   r   N)Úreturnztype[BaseException])r   zBaseException | None)r   zTracebackType | None)r   zThread | None)
Ú__name__Ú
__module__Ú__qualname__Ú__firstlineno__Úpropertyr   r   r   r   Ú__static_attributes__r   r   r   r
   r
      s:    Ø	Û6ó 
Ø6Ø	Û8ó 
Ø8Ø	Û<ó 
Ø<Ø	Û.ó 
Û.r   r
   c                  ó(    \ rS rSrSS jrSS jrSrg)ÚShowExceptionsé   c                ó    g r   r   r   s    r   Ú__call__ÚShowExceptions.__call__   s     3r   c                ó    g r   r   ©r   Úss     r   ÚaddÚShowExceptions.add   s     sr   r   N©r   Úint©r-   Ústrr   ÚNone)r   r    r!   r"   r)   r.   r$   r   r   r   r&   r&      s    Ü&ß*r   r&   é   )ÚReaderc                ó|   ^ ^ SS K m[         " U U4S jS5      5       nU" 5       nUT l        UR                  Tl        g )Nr   c                  ó   > \ rS rSr% \"  YR
                  S9rS\S'   \" \S9r	S\S'   SU 4S jjr
SS jrSU 4S	 jjrSS
 jrSrg)Ú1install_threading_hook.<locals>.ExceptHookHandleré!   )Údefault_factoryzthreading.LockÚlockz	list[str]Úmessagesc                ó  > SnU R                      U R                  (       d
   S S S 5        gTR                  5         U R                   H  nUS-  nU(       d  M  [        U5        M     U R                  R	                  5         TR
                  R                  S5        TR                  5         S S S 5        U$ ! , (       d  f       U$ = f)Nr   r5   zctrl-c)r<   r=   ÚrestoreÚprintÚclearÚscheduled_commandsÚappendÚprepare)r   ÚcountÚtbÚreaders      r   ÚshowÚ6install_threading_hook.<locals>.ExceptHookHandler.show&   s   ø ØEØØ}}Ø÷ ð Ô Ø--BØQJEßrÜb	ñ (ð ×#Ñ#Ô%Ø×)Ñ)×0Ñ0°Ô:ØÔ ÷ ð L÷ ð Lús   B7¬)B7ÁAB7Â7
Cc                ó    U R                      U R                  R                  U5        S S S 5        g ! , (       d  f       g = fr   )r<   r=   rC   r,   s     r   r.   Ú5install_threading_hook.<locals>.ExceptHookHandler.add5   s%    ØØ×$Ñ$ QÔ'÷ ús	   2²
A c                ó(  > [         R                  " UR                  UR                  UR                  TR
                  S9nUR                  (       a  SUR                  R                   S3OSnUSR                  U5      -   nU R                  U5        g )N)Úcolorizez
Exception in z:
Ú
Ú )
Ú	tracebackÚformat_exceptionr   r   r   Úcan_colorizer   ÚnameÚjoinr.   )r   ÚargsÚlinesÚprerF   rG   s        r   Ú	exceptionÚ;install_threading_hook.<locals>.ExceptHookHandler.exception9   st   ø Ü×.Ò.ØØØ×"Ñ"Ø×,Ñ,ñ	Eð >B¿[¿[O D§K¡K×$4Ñ$4Ð#5°SÑ9ÈdCØrwwu~Ñ%BØHHRLr   c                ó"    U R                  5       $ r   )rH   r   s    r   r)   Ú:install_threading_hook.<locals>.ExceptHookHandler.__call__D   s    Ø99;Ðr   r   Nr0   r2   )rU   r
   r   r4   )r   r    r!   r"   r   ÚLockr<   Ú__annotations__Úlistr=   rH   r.   rX   r)   r$   )rG   Ú	threadings   r   ÚExceptHookHandlerr9   !   s9   ø á$±Y·^±^ÑDnÓDÙ#°DÑ9)Ó9÷	ô	(÷		÷	r   r`   )r_   r   Úthreading_hookrX   Ú
excepthook)rG   r`   Úhandlerr_   s   `  @r   Úinstall_threading_hookrd      s>   ù Ûä÷#ô #ó ð#ñL  Ó!GØ#FÔØ"×,Ñ,IÕr   )rG   r6   r   r4   )Ú
__future__r   Údataclassesr   r   rP   ÚTYPE_CHECKINGr_   r   Útypesr   Útypingr   r
   r&   rG   r6   rd   r   r   r   Ú<module>rj      sC   ðÝ "ç (Û ð ÞÝ Ý#Ýô/ô /ô+ô +õ õ,-r                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     ó
    F\hý  ã                   óL    S r SSKJr  SSKJr  SSKJr  SSKJr   " S S5      rg	)
zv
OS-independent base for an event and VT sequence scanner

See unix_eventqueue and windows_eventqueue for subclasses.
é    )Údequeé   )Úkeymap)ÚEvent)Útracec                   ó    \ rS rSrS\S\\\4   SS4S jrS\S-  4S jr	S\
4S jrS\4S	 jrS
\SS4S jrS\\-  SS4S jrSrg)ÚBaseEventQueueé!   ÚencodingÚkeymap_dictÚreturnNc                 óÌ    [         R                  " U5      U l        U R                  U l         [        SU R                   S9  Xl        [        5       U l        [        5       U l        g )Nzkeymap {k!r}©Úk)	r   Úcompile_keymapÚcompiled_keymapr   r   r   ÚeventsÚ	bytearrayÚbuf)Úselfr   r   s      Ú./usr/lib/python3.13/_pyrepl/base_eventqueue.pyÚ__init__ÚBaseEventQueue.__init__"   sG    Ü%×4Ò4°[ÓAÔØ×*Ñ*Ün §¡Ò,Ø Ü$)£GÜ;ó    c                 óZ    U R                   (       a  U R                   R                  5       $ g)z*
Retrieves the next event from the queue.
N)r   Úpopleft©r   s    r   ÚgetÚBaseEventQueue.get*   s!    ð ;;Ø;;×&Ñ&Ó(Ð(àr   c                 ó$    U R                   (       + $ )z
Checks if the queue is empty.
)r   r   s    r   ÚemptyÚBaseEventQueue.empty3   s    ð ;;Ðr   c                 ó<    U R                   n[        5       U l         U$ )z.
Flushes the buffer and returns its contents.
)r   r   )r   Úolds     r   Ú	flush_bufÚBaseEventQueue.flush_buf9   s    ð hhÜ;Ø
r   Úeventc                 óN    [        SUS9  U R                  R                  U5        g)z"
Inserts an event into the queue.
zadded event {event})r'   N)r   r   Úappend)r   r'   s     r   ÚinsertÚBaseEventQueue.insertA   s!    ô 	Ð#¨5Ò1Ø×Ñ5Õ!r   Úcharc           	      óR   [        U[        [        45      (       d   e[        U[        5      (       a  UO
[        U5      nUR	                  5       nU R
                  R                  U5        XR                  ;   a¤  U R                  U R                  L a  [        U R
                  5      S:X  d   eU R                  U   n[        SUS9  [        U[        5      (       a  X0l        g
U R                  [        SX0R                  5       5      5        U R                  U l        g
U R
                  (       a  U R
                  S   S:X  am  [        S5        U R                  U l        U R                  [        SS[        S	5      5      5        U R                  5       SS
  H  nU R!                  U5        M     g
 [        U R
                  5      R#                  U R$                  5      nU R                  [        SXPR                  5       5      5        U R                  U l        g
! [&         a     g
f = f)zQ
Processes a character by updating the buffer and handling special key mappings.
r   zfound map {k!r}r   Úkeyr   é   z,unrecognized escape sequence, propagating...Úó   N)Ú
isinstanceÚintÚbytesÚordÚto_bytesr   r)   r   r   Úlenr   Údictr*   r   r%   r   ÚpushÚdecoder   ÚUnicodeError)r   r,   Úord_charr   Ú_cÚdecodeds         r   r9   ÚBaseEventQueue.pushH   s   ô $¤¤e ×-Ñ-Ð-Ð-Ü% d¬C×0Ñ04´c¸$³iØ× Ñ Ó"ØÔ!à;;ÓØ{{d×2Ñ2Ò2ä488}¨Ó)Ð)Ð)ØDÑ!AÜÐ# qÒ)Ü!T×"Ñ"ØàE %¨¯N©NÓ,<Ó=Ô>Ø"×2Ñ2àXX$(( 1+¨Ó+ô Ð@ÔAØ×.Ñ.DKØKKe V¬Y°wÓ-?Ó@ÔAØnnÓ& q rÓ*Ø		"ò +ðEÜ §¡/×0Ñ0°·±Ó?ð E %¨·.±.Ó2BÓCÔDØ×.Ñ.DKøô	  ó Ùðús   Æ0.H È
H&È%H&)r   r   r   r   r   )Ú__name__Ú
__module__Ú__qualname__Ú__firstlineno__Ústrr8   r4   r   r   r   Úboolr!   r   r%   r*   r3   r9   Ú__static_attributes__© r   r   r	   r	   !   sw    ð ð °4¸¸s¸
Ñ3Cð Èô ðUT\ô ðtô ð9ô ð"Eð " dô "ð&/uð &/¨÷ &/r   r	   N)	Ú__doc__Úcollectionsr   Ú r   Úconsoler   r   r	   rG   r   r   Ú<module>rL      s$   ðñ*õ å Ý Ý ÷M/ò M/r                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               ó
    F\h/  ã                  óÞ   S SK Jr  S SKr  " S S5      r " S S\5      r " S S\5      r " S	 S
\5      r " S S\5      r	 " S S\5      r
S[S jrS[S jr " S S\5      r " S S\5      r " S S\5      r " S S\5      r " S S\5      r " S S\5      r " S S\5      r " S S \5      r " S! S"\5      r " S# S$\5      r " S% S&\5      r " S' S(\
5      r " S) S*\5      r " S+ S,\5      r " S- S.\5      r " S/ S0\5      r " S1 S2\5      r " S3 S4\5      r " S5 S6\5      r " S7 S8\5      r  " S9 S:\5      r! " S; S<\5      r" " S= S>\5      r# " S? S@\5      r$ " SA SB\	5      r% " SC SD\	5      r& " SE SF\	5      r' " SG SH\	5      r( " SI SJ\	5      r) " SK SL\
5      r* " SM SN\5      r+ " SO SP\5      r, " SQ SR\5      r- " SS ST\5      r. " SU SV\5      r/ " SW SX\5      r0 " SY SZ\5      r1g)\é    )ÚannotationsNc                  óV    \ rS rSr% SrS\S'   SrS\S'           SS jrSS jrS	r	g
)ÚCommandé(   FÚboolÚfinishTÚkills_digit_argc                ó(    Xl         X0l        X l        g ©N)ÚreaderÚeventÚ
event_name)Úselfr   r   r   s       Ú'/usr/lib/python3.13/_pyrepl/commands.pyÚ__init__ÚCommand.__init__,   s    ð Ø
Ø$ó    c                ó    g r   © ©r   s    r   ÚdoÚ
Command.do7   ó    Ør   )r   r   r   N)r   ÚHistoricalReaderr   Ústrr   z	list[str]ÚreturnÚNone©r   r   )
Ú__name__Ú
__module__Ú__qualname__Ú__firstlineno__r   Ú__annotations__r	   r   r   Ú__static_attributes__r   r   r   r   r   (   s@    ØFDÓØ OTÓ ð	%Ø&ð	%Ø47ð	%Ø@Ið	%à	ô	%÷r   r   c                  ó    \ rS rSrSS jrSrg)ÚKillCommandé;   c                óp   X:X  a  g U R                   nUR                  nXAU nXAU2	 [        UR                  5      (       aN  XR                  :  a  XSR
                  S   -   UR
                  S'   O;UR
                  S   U-   UR
                  S'   OUR
                  R                  U5        Xl        SUl        g )NéÿÿÿÿT)r   ÚbufferÚis_killÚlast_commandÚposÚ	kill_ringÚappendÚdirty)r   ÚstartÚendÚrÚbÚtexts         r   Ú
kill_rangeÚKillCommand.kill_range<   s    Ø<ØØKKØHHØs|ØCiLÜ1>>×"Ñ"Øuu}Ø"&¯©°R©Ñ"8Bà"#§+¡+¨b¡/°DÑ"8BàKK×ÑtÔ$ØØr   r   N)r1   Úintr2   r8   r   r   )r   r    r!   r"   r6   r$   r   r   r   r&   r&   ;   s    ÷r   r&   c                  ó    \ rS rSrSrg)ÚYankCommandéN   r   N©r   r    r!   r"   r$   r   r   r   r:   r:   N   ó    Úr   r:   c                  ó    \ rS rSrSrg)ÚMotionCommandéR   r   Nr<   r   r   r   r?   r?   R   r=   r   r?   c                  ó    \ rS rSrSrg)ÚEditCommandéV   r   Nr<   r   r   r   rB   rB   V   r=   r   rB   c                  ó    \ rS rSrSrSrg)ÚFinishCommandéZ   Tr   N)r   r    r!   r"   r   r$   r   r   r   rE   rE   Z   s
    ØFÚr   rE   c                ó8    U S L=(       a    [        U [        5      $ r   )Ú
issubclassr&   ©Úcommands    r   r+   r+   _   ó    Ø$Ð×C¤:¨g´{Ó#CÐCr   c                ó8    U S L=(       a    [        U [        5      $ r   )rH   r:   rI   s    r   Úis_yankrM   c   rK   r   c                  ó"    \ rS rSrSrSS jrSrg)Ú	digit_argéj   Fc                ó`   U R                   nU R                  S   nUS:X  a(  UR                  b  UR                  * Ul        OfSUl        O^[        U5      nUR                  c  X1l        O?UR                  S:  a  SUR                  -  U-
  Ul        OSUR                  -  U-   Ul        SUl        g )Nr)   Ú-r   é
   T)r   r   Úargr8   r0   )r   r3   ÚcÚds       r   r   Údigit_arg.dom   s    ØKKØJJrNØ8ØuuÑ ØàäAAØuu}Øà5519Ø §¡J¨NAEà §¡J¨NAEØr   r   Nr   )r   r    r!   r"   r	   r   r$   r   r   r   rO   rO   j   s    ØO÷r   rO   c                  ó    \ rS rSrSS jrSrg)Úclear_screené   c                ó^    U R                   nUR                  R                  5         SUl        g ©NT)r   ÚconsoleÚclearr0   ©r   r3   s     r   r   Úclear_screen.do   s     ØKKØ			ÔØr   r   Nr   ©r   r    r!   r"   r   r$   r   r   r   rY   rY      ó    ÷r   rY   c                  ó    \ rS rSrSS jrSrg)Úrefreshé   c                ó&    SU R                   l        g r\   )r   r0   r   s    r   r   Ú
refresh.do   s    Ø Õr   r   Nr   ra   r   r   r   rd   rd      s    ÷!r   rd   c                  ó    \ rS rSrSS jrSrg)Úrepainté   c                ón    SU R                   l        U R                   R                  R                  5         g r\   )r   r0   r]   ri   r   s    r   r   Ú
repaint.do   s$    Ø ÔØ×Ñ×#Ñ#Õ%r   r   Nr   ra   r   r   r   ri   ri      s    ÷&r   ri   c                  ó    \ rS rSrSS jrSrg)Ú	kill_lineé   c                ó"   U R                   nUR                  nUR                  5       nX!R                  U  H6  nUR	                  5       (       a  M  U R                  UR                  U5          g    U R                  UR                  US-   5        g )Né   )r   r*   Úeolr-   Úisspacer6   )r   r3   r4   rr   rU   s        r   r   Úkill_line.do   si    ØKKØHHØeegØ553AØ99;;Ø §¡ sÔ+Ùñ  ð
 OOAEE 3¨¡7Õ+r   r   Nr   ra   r   r   r   rn   rn      s    ÷	,r   rn   c                  ó    \ rS rSrSS jrSrg)Úunix_line_discardé    c                óp    U R                   nU R                  UR                  5       UR                  5        g r   )r   r6   Úbolr-   r_   s     r   r   Úunix_line_discard.do¡   s#    ØKKØ §¡Õ'r   r   Nr   ra   r   r   r   rv   rv       s    ÷(r   rv   c                  ó    \ rS rSrSS jrSrg)Úunix_word_rubouté¦   c                ó°    U R                   n[        UR                  5       5       H-  nU R                  UR	                  5       UR
                  5        M/     g r   ©r   ÚrangeÚget_argr6   Úbowr-   ©r   r3   Úis      r   r   Úunix_word_rubout.do§   ó8    ØKKÜqyy{Ö#AØOOAEEG Q§U¡UÖ+ò $r   r   Nr   ra   r   r   r   r|   r|   ¦   ó    ÷,r   r|   c                  ó    \ rS rSrSS jrSrg)Ú	kill_wordé­   c                ó°    U R                   n[        UR                  5       5       H-  nU R                  UR                  UR                  5       5        M/     g r   )r   r   r   r6   r-   Úeowr   s      r   r   Úkill_word.do®   s8    ØKKÜqyy{Ö#AØOOAEE 1§5¡5£7Ö+ò $r   r   Nr   ra   r   r   r   r   r   ­   r   r   r   c                  ó    \ rS rSrSS jrSrg)Úbackward_kill_wordé´   c                ó°    U R                   n[        UR                  5       5       H-  nU R                  UR	                  5       UR
                  5        M/     g r   r   r   s      r   r   Úbackward_kill_word.doµ   r   r   r   Nr   ra   r   r   r   r   r   ´   r   r   r   c                  ó    \ rS rSrSS jrSrg)Úyanké»   c                ó    U R                   nUR                  (       d  UR                  S5        g UR                  UR                  S   5        g )Núnothing to yankr)   )r   r.   ÚerrorÚinsertr_   s     r   r   Úyank.do¼   s6    ØKKØ{{ØGGÐ%Ô&ØØ	RÕ!r   r   Nr   ra   r   r   r   r   r   »   s    ÷"r   r   c                  ó    \ rS rSrSS jrSrg)Úyank_popéÄ   c                ó   U R                   nUR                  nUR                  (       d  UR                  S5        g [	        UR
                  5      (       d  UR                  S5        g [        UR                  S   5      nUR                  R                  SUR                  R                  5       5        UR                  S   nXBUR                  U-
  UR                  & UR                  U-
  [        U5      -   Ul	        SUl
        g )Nr   zprevious command was not a yankr)   r   T)r   r*   r.   r   rM   r,   Úlenr   Úpopr-   r0   )r   r3   r4   ÚreplÚts        r   r   Úyank_pop.doÅ   s½    ØKKØHHØ{{ØGGÐ%Ô&ØÜq~~×&Ñ&ØGGÐ5Ô6ØÜ1;;r?Ó#Ø	×Ñ1akkooÓ/Ô0ØKKOØ"#!%%$,ÐØs 1vÑ%Ør   r   Nr   ra   r   r   r   r   r   Ä   s    ÷r   r   c                  ó    \ rS rSrSS jrSrg)Ú	interruptéÖ   c                óð    SS K nU R                  R                  R                  5         U R                  R                  5         [        R
                  " [        R                  " 5       UR                  5        g ©Nr   )Úsignalr   r]   r   ÚosÚkillÚgetpidÚSIGINT)r   r©   s     r   r   Úinterrupt.do×   sC    Ûà×Ñ×"Ñ"Ô$Ø×ÑÔÜ
		V]]Õ+r   r   Nr   ra   r   r   r   r¥   r¥   Ö   s    ÷,r   r¥   c                  ó    \ rS rSrSS jrSrg)Úctrl_céß   c                ó    U R                   R                  R                  5         U R                   R                  5         [        er   )r   r]   r   ÚKeyboardInterruptr   s    r   r   Ú	ctrl_c.doà   s.    Ø×Ñ×"Ñ"Ô$Ø×ÑÔÜÐr   r   Nr   ra   r   r   r   r°   r°   ß   s    ÷ r   r°   c                  ó    \ rS rSrSS jrSrg)Úsuspendéæ   c                óH   SS K nU R                  nUR                  nUR                  R	                  5         [
        R                  " [
        R                  " 5       UR                  5        UR                  R                  5         X2l        SUl
        / UR                  l        g )Nr   T)r©   r   r-   r]   r   rª   r«   r¬   ÚSIGSTOPÚpreparer0   Úscreen)r   r©   r3   Úps       r   r   Ú
suspend.doç   si    ÛàKKØEEØ			×ÑÔÜ
		V^^Ô,ð 	
		×ÑÔØàØ		Õr   r   Nr   ra   r   r   r   r¶   r¶   æ   s    ÷r   r¶   c                  ó    \ rS rSrSS jrSrg)Úupé÷   c                ó&   U R                   n[        UR                  5       5       Hè  nUR                  5       u  p4US-
  nUR	                  5       S:X  aJ  UR
                  S:  a   UR                  UR
                  S-
  5          g SUl        UR                  S5          g UUR                  U5      =n:  dF  X1R                  U5      :X  a4  [        S UR                  UR	                  5       S   5       5      (       a  UnUR                  X55        Mê     g )Nrq   r   ústart of bufferc              3  óJ   #    U  H  oR                  5       (       + v   M     g 7fr   ©rs   ©Ú.0r   s     r   Ú	<genexpr>Úup.do.<locals>.<genexpr>  ó   é  ð Ú-@¨		OOÒ-@ùó   !#)r   r   r   Úpos2xyry   ÚhistoryiÚselect_itemr-   r   Ú
max_columnÚanyr*   Úsetpos_from_xy)r   r3   Ú_ÚxÚyÚnew_yÚnew_xs          r   r   Úup.doø   sç    ØKKÜqyy{Ö#AØ88:DAØEEàuuw!|Ø:: >ØMM !§*¡*¨q¡.Ô1ÙØØÐ)Ô*Ùð à\\¨%Ó0Ð0Eóð  QÓ'Üñ Ø-.¯X©X°a·e±e³g°iÑ-@ó÷ ñ ð à×ÑQÖ&ò1 $r   r   Nr   ra   r   r   r   r¿   r¿   ÷   s    ÷'r   r¿   c                  ó    \ rS rSrSS jrSrg)Údowni  c                ó¸   U R                   nUR                  n[        UR                  5       5       GH$  nUR	                  5       u  pEUS-   nUR                  5       [        U5      :X  a|  UR                  [        UR                  5      :  a6  UR                  UR                  S-   5        UR                  S5      Ul
          g [        U5      Ul
        UR                  S5          g UUR                  U5      =n:  dF  XAR                  U5      :X  a4  [        S UR                  UR                  5       S   5       5      (       a  UnUR                  XF5        GM'     g )Nrq   r   úend of bufferc              3  óJ   #    U  H  oR                  5       (       + v   M     g 7fr   rÄ   rÅ   s     r   rÇ   Údown.do.<locals>.<genexpr>,  rÉ   rÊ   )r   r*   r   r   rË   rr   r   rÌ   ÚhistoryrÍ   r-   r   rÎ   rÏ   ry   rÐ   )r   r3   r4   rÑ   rÒ   rÓ   rÔ   rÕ   s           r   r   Údown.do  s   ØKKØHHÜqyy{×#AØ88:DAØEEàuuw#a&Ó Ø::¤ A§I¡I£Ó.ØMM !§*¡*¨q¡.Ô1ØEE !HAEÙÜAØÔ(Ùð à\\¨%Ó0Ð0Eóð  QÓ'Üñ Ø-.¯X©X°a·e±e³g°iÑ-@ó÷ ñ ð à×ÑQ×&ò3 $r   r   Nr   ra   r   r   r   rØ   rØ     s    ÷'r   rØ   c                  ó    \ rS rSrSS jrSrg)Úlefti5  c                óÌ    U R                   n[        UR                  5       5       H;  nUR                  S-
  nUS:¼  a  X1l        M   U R                   R	                  S5        M=     g )Nrq   r   rÂ   )r   r   r   r-   r   )r   r3   rÑ   r¼   s       r   r   Úleft.do6  sL    ØKKÜqyy{Ö#AØ	AØAvØà×!Ñ!Ð"3Ö4ò $r   r   Nr   ra   r   r   r   rà   rà   5  s    ÷5r   rà   c                  ó    \ rS rSrSS jrSrg)Úrighti@  c                óö    U R                   nUR                  n[        UR                  5       5       HD  nUR                  S-   nU[        U5      ::  a  XAl        M)  U R                   R                  S5        MF     g )Nrq   rÚ   )r   r*   r   r   r-   r   r   )r   r3   r4   rÑ   r¼   s        r   r   Úright.doA  sX    ØKKØHHÜqyy{Ö#AØ	AØCF{Øà×!Ñ! /Ö2ò $r   r   Nr   ra   r   r   r   rä   rä   @  s    ÷3r   rä   c                  ó    \ rS rSrSS jrSrg)Úbeginning_of_lineiL  c                óV    U R                   R                  5       U R                   l        g r   )r   ry   r-   r   s    r   r   Úbeginning_of_line.doM  ó    Ø++//Ó+r   r   Nr   ra   r   r   r   rè   rè   L  ó    ÷,r   rè   c                  ó    \ rS rSrSS jrSrg)Úend_of_lineiQ  c                óV    U R                   R                  5       U R                   l        g r   )r   rr   r-   r   s    r   r   Úend_of_line.doR  rë   r   r   Nr   ra   r   r   r   rî   rî   Q  rì   r   rî   c                  ó    \ rS rSrSS jrSrg)ÚhomeiV  c                ó&    SU R                   l        g r¨   )r   r-   r   s    r   r   Úhome.doW  s    Ør   r   Nr   ra   r   r   r   rò   rò   V  s    ÷r   rò   c                  ó    \ rS rSrSS jrSrg)r2   i[  c                ó`    [        U R                  R                  5      U R                  l        g r   )r   r   r*   r-   r   s    r   r   Úend.do\  s    Üdkk×0Ñ0Ó1r   r   Nr   ra   r   r   r   r2   r2   [  s    ÷2r   r2   c                  ó    \ rS rSrSS jrSrg)Úforward_wordi`  c                ó    U R                   n[        UR                  5       5       H  nUR                  5       Ul        M     g r   )r   r   r   r   r-   r   s      r   r   Úforward_word.doa  ó-    ØKKÜqyy{Ö#AØEEGAEò $r   r   Nr   ra   r   r   r   rù   rù   `  ó    ÷r   rù   c                  ó    \ rS rSrSS jrSrg)Úbackward_wordig  c                ó    U R                   n[        UR                  5       5       H  nUR                  5       Ul        M     g r   )r   r   r   r   r-   r   s      r   r   Úbackward_word.doh  rü   r   r   Nr   ra   r   r   r   rÿ   rÿ   g  rý   r   rÿ   c                  ó    \ rS rSrSS jrSrg)Úself_insertin  c                óx    U R                   nU R                  UR                  5       -  nUR                  U5        g r   )r   r   r   r   )r   r3   r5   s      r   r   Úself_insert.doo  s*    ØKKØzzAIIKÑ'Ø	r   r   Nr   ra   r   r   r   r  r  n  rb   r   r  c                  ó    \ rS rSrSS jrSrg)Ú	insert_nliu  c                ó`    U R                   nUR                  SUR                  5       -  5        g )NÚ
)r   r   r   r_   s     r   r   Úinsert_nl.dov  s"    ØKKØ			Ñ#Õ$r   r   Nr   ra   r   r   r   r  r  u  s    ÷%r   r  c                  ó    \ rS rSrSS jrSrg)Útranspose_charactersi{  c                óB   U R                   nUR                  nUR                  S-
  nUS:  a  UR                  S5        g U[	        U5      :X  a  US-  n[        X1R                  5       -   [	        U5      S-
  5      nX#   nX#	 UR                  XE5        XAl        SUl        g )Nrq   r   z#cannot transpose at start of bufferT)	r   r*   r-   r   r   Úminr   r   r0   )r   r3   r4   Úsr¢   rU   s         r   r   Útranspose_characters.do|  s    ØKKØHHØEEAIØq5ØGGÐ9Õ:àCF{ØQÜA		O¤S¨£V¨a¡ZÓ0AØAØØHHQNØEØAGr   r   Nr   ra   r   r   r   r  r  {  s    ÷r   r  c                  ó    \ rS rSrSS jrSrg)Ú	backspacei  c                ó   U R                   nUR                  n[        UR                  5       5       HX  nUR                  S:  a*  U=R                  S-  sl        X!R                  	 SUl        M=  U R                   R                  S5        MZ     g )Nr   rq   Tzcan't backspace at start)r   r*   r   r   r-   r0   r   ©r   r3   r4   r   s       r   r   Úbackspace.do  sd    ØKKØHHÜqyy{Ö#AØuuqyØ
ØeeHØà×!Ñ!Ð"<Ö=ò $r   r   Nr   ra   r   r   r   r  r    s    ÷	>r   r  c                  ó    \ rS rSrSS jrSrg)Údeletei  c                óÊ   U R                   nUR                  nUR                  S:X  aR  [        U5      S:X  aC  U R                  S   S:X  a0  UR                  5         UR                  R                  5         [        e[        UR                  5       5       HL  nUR                  [        U5      :w  a  X!R                  	 SUl        M1  U R                   R                  S5        MN     g )Nr   r)   ÚTrÚ   )r   r*   r-   r   r   Úupdate_screenr]   r   ÚEOFErrorr   r   r0   r   r  s       r   r   Ú	delete.do  s    ØKKØHHàEEQJÜA!Ø

2 &Ó(àOOÔØII×ÑÔÜNÜqyy{Ö#AØuuAØeeHØà×!Ñ! /Ö2ò $r   r   Nr   ra   r   r   r   r  r    s    ÷3r   r  c                  ó    \ rS rSrSS jrSrg)Úaccepti®  c                ó    g r   r   r   s    r   r   Ú	accept.do¯  r   r   r   Nr   ra   r   r   r   r  r  ®  s    ÷r   r  c                  ó    \ rS rSrSS jrSrg)Úhelpi³  c                ó¼    SS K nU R                  R                  5          UR                  5       " 5       U R                  l        S S S 5        g ! , (       d  f       g = fr¨   )Ú_sitebuiltinsr   r¶   Ú_HelperÚmsg)r   r$  s     r   r   Úhelp.do´  s8    Ûà[[× Ñ Õ"Ø+×3Ñ3Ô5Ó7DKKO÷ #×"Ö"ús   %AÁ
Ar   Nr   ra   r   r   r   r"  r"  ³  s    ÷8r   r"  c                  ó    \ rS rSrSS jrSrg)Úinvalid_keyi»  c                óØ    U R                   R                  R                  5       nSR                  U R                  5      UR
                  -   nU R                   R                  SU-  5        g )NÚ z`%r' not bound)r   r]   Ú
getpendingÚjoinr   Údatar   )r   Úpendingr  s      r   r   Úinvalid_key.do¼  sM    Ø++×%Ñ%×0Ñ0Ó2ØGGDJJÓ '§,¡,Ñ.Ø×ÑÐ*¨QÑ.Õ/r   r   Nr   ra   r   r   r   r)  r)  »  s    ÷0r   r)  c                  ó    \ rS rSrSS jrSrg)Úinvalid_commandiÂ  c                óX    U R                   nU R                  R                  SU-  5        g )Nzcommand `%s' not known)r   r   r   )r   r  s     r   r   Úinvalid_command.doÃ  s#    ØOOØ×ÑÐ2°QÑ6Õ7r   r   Nr   ra   r   r   r   r2  r2  Â  s    ÷8r   r2  c                  ó    \ rS rSrSS jrSrg)Úshow_historyiÈ  c                ó   SSK Jn  SSKJn  [        R
                  R                  U R                  R                  S S  5      nU R                  R                  R                  5         U" 5       nU" X2" 5       5        U R                  R                  R                  5         U R                  R                  R                  5       U R                  R                  l        U R                  R                  U R                  R                  l        g )Nrq   )Ú	get_pagerr   )Úgethistoryfile)Úpagerr8  Úsiter9  rª   Úlinesepr-  r   rÝ   r]   Úrestorerº   r»   ÚcopyÚcxyÚposxy)r   r8  r9  rÝ   r:  s        r   r   Úshow_history.doÉ  sª    Ý$Ý'ä**// $§+¡+×"5Ñ"5±aÐ"8Ó9Ø×Ñ×#Ñ#Ô%ÙÙg~Ó'Ô(Ø×Ñ×#Ñ#Ô%ð &*§[¡[×%7Ñ%7×%<Ñ%<Ó%>×ÑÔ"Ø$(§K¡K§O¡O×ÑÕ!r   r   Nr   ra   r   r   r   r6  r6  È  s    ÷4r   r6  c                  ó    \ rS rSrSS jrSrg)Ú
paste_modeiÙ  c                óz    U R                   R                  (       + U R                   l        SU R                   l        g r\   )r   rC  r0   r   s    r   r   Úpaste_mode.doÛ  s'    Ø%)§[¡[×%;Ñ%;Ô!;ÔØ Õr   r   Nr   ra   r   r   r   rC  rC  Ù  s    ÷!r   rC  c                  ó    \ rS rSrSS jrSrg)Úenable_bracketed_pasteià  c                óH    SU R                   l        SU R                   l        g r\   )r   rC  Úin_bracketed_paster   s    r   r   Úenable_bracketed_paste.doá  s    Ø!%ÔØ)-Õ&r   r   Nr   ra   r   r   r   rG  rG  à  s    ÷.r   rG  c                  ó    \ rS rSrSS jrSrg)Údisable_bracketed_pasteiå  c                ój    SU R                   l        SU R                   l        SU R                   l        g )NFT)r   rC  rI  r0   r   s    r   r   Údisable_bracketed_paste.doæ  s&    Ø!&ÔØ).Ô&Ø Õr   r   Nr   ra   r   r   r   rL  rL  å  s    ÷!r   rL  )rJ   ztype[Command] | Noner   r   )2Ú
__future__r   rª   Úhistorical_readerr   r   r&   r:   r?   rB   rE   r+   rM   rO   rY   rd   ri   rn   rv   r|   r   r   r   r   r¥   r°   r¶   r¿   rØ   rà   rä   rè   rî   rò   r2   rù   rÿ   r  r  r  r  r  r  r"  r)  r2  r6  rC  rG  rL  r   r   r   Ú<module>rQ     s!  ðõ, #Û 	ð 	÷ñ ô&'ô ô&	'ô 	ô	Gô 	ô	'ô 	ô	Gô 	ô
DôDôô ô.7ô ô!gô !ô
&gô &ô
,ô 
,ô(ô (ô,{ô ,ô,ô ,ô,ô ,ô";ô "ô{ô ô$,ô ,ô Wô  ôgô ô"'ô 'ô<'=ô 'ô@5=ô 5ô	3Mô 	3ô,ô ,ô
,-ô ,ô
=ô ô
2-ô 2ô
=ô ôMô ô+ô ô%ô %ô;ô ô$
>ô 
>ô3[ô 3ô(]ô ô
87ô 8ô0'ô 0ô8gô 8ô47ô 4ô"!ô !ô.Wô .ô
!gõ !r                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ó
    F\hB'  ã                  óH   S SK Jr  S SKJrJr  S SKrSSKJrJrJ	r	  SSK	J
r
  \R                  r SSS jjr\R                   " S5      rSS	 jrSS
 jrSS jr            SS jr " S S\R                  5      r " S S\R.                  5      r\ " S S\
5      5       rg)é    )Úannotations)Ú	dataclassÚfieldNé   )ÚcommandsÚconsoleÚreader)ÚReaderc                ó    0 nUn  U  H
  nSX$U   '   M     [        U5      S:  a  U S   X $ US-  n0 nM/  ! [         a
    U S   X s $ f = f©Nr   r   )ÚlenÚ
IndexError)ÚwordlistÚjÚdÚiÚwords        Ú0/usr/lib/python3.13/_pyrepl/completing_reader.pyÚprefixr   $   sv    Ø
AØ	Að	 ØÛ Øq'
ñ !ä1vzØ { 1Ð'Ð'ØFAØAñ øô ó  Ø{1ÐÒð ús   &6 ­	6 ¶A
Á	A
z&\x1B\[([0-9]{1,3}(;[0-9]{1,2})?)?[m|K]c                ó.    [         R                  SU 5      $ )NÚ )ÚSTRIPCOLOR_REGEXÚsub©Úss    r   Ú
stripcolorr   6   s    Ü×Ñ  AÓ&Ð&ó    c                ó*    [        [        U 5      5      $ ©N)r   r   r   s    r   Úreal_lenr    :   s    Üz!}ÓÐr   c                ól    [        U 5      n[        U5      U:  a  US U $ U[        U5      -
  nU SU-  -   $ )NÚ )r   r   )r   ÚmaxlenÚstrippedÚpaddings       r   Ú
left_alignr&   >   s@    Ü!}HÜ
8}vÓàÐ Ð Øs8}Ñ$GØs7{?Ðr   c           	     óf   U(       a  SnSnOSnSn[        [        [        [        U5      5      U R                  U-
  5      n[        U R                  Xv-   -  5      n[        [        U5      S-
  U-  S-   5      n	U(       a[  X-  [        U5      -
  n
US/U
-  -   n[        [        U5      5       Vs/ s H  o»U-  U	-  X¸-  -   PM     nnU Vs/ s H  o±U   PM	     nn/ nUn[        U	5       H¹  n/ n[        U5       H9  nUR                  U[        X   U5      -  5        US-  nU[        U5      :¼  d  M9    O   UR                  SR                  U5      5        U[        U5      :¼  a  Sn  XÛ4$ US-   U R                  :  d  M  UR                  S	[        U5      U-
  -  5          XÛ4$    XÛ4$ s  snf s  snf )
Nz[ %s ]é   z%s  é   r   r   r   é   z   %d more... )ÚminÚmaxÚmapr    ÚwidthÚintr   ÚrangeÚappendr&   ÚjoinÚheight)Úconsr   ÚstartÚuse_bracketsÚsort_in_columnÚitemr%   r#   ÚcolsÚrowsÚmissingr   ÚindexesÚmenuÚrÚrowÚcols                    r   Ú
build_menurA   G   s°   ö ØØàØÜS 8Ó,Ó-¨t¯z©z¸GÑ/CÓDFÜtzzVÑ-Ñ.Ó/DÜH Ñ! 4Ñ'¨!Ñ+Ó,Dæð )c (mÑ+Ørd 7lÑ*Ü:?ÄÀHÃÔ:NÓOÒ:N°QH Ñ$ q¡yÔ0Ñ:NÐOÙ)0Ó1ª AQK©Ð1ØDØAÜ4[ØÜ;CØJJtj¨©°fÓ=Ñ=Ô>ØFAØCMÕ!Ùñ	 ð
 	BGGCLÔ!ØHÓØAØð 7Nð q54;;ÕØKKÐ(¬C°«M¸AÑ,=Ñ>Ô?ØØ7Nñ ð 7Nùò% PùÚ1s   Â.F)Ã
F.c                  ó    \ rS rSrSS jrSrg)Úcompleteé¦   c                óz   U R                   nUR                  U R                  5      nUR                  nU=(       a    UnUR	                  5       nU(       d  UR                  U5      Ul        UR                  nU(       d  UR                  S5        g [        U5      S:X  aQ  U(       a)  [        US   5      [        U5      :X  a  SUl	        SUl
        UR                  US   [        U5      S  5        g [        U[        U5      5      nU(       a  UR                  U5        U(       aY  SUl        SUl        [        UR                   XaR"                  UR$                  UR&                  5      u  Ul        Ul        SUl
        g UR                  (       d-  SUl        XW-   U;   a  SUl	        SUl
        g SUl	        SUl
        g g )	Nz
no matchesr   r   z[ sole completion ]TFz[ complete but not unique ]z[ not unique ])r	   Úlast_command_isÚ	__class__Úassume_immutable_completionsÚget_stemÚget_completionsÚcmpltn_menu_choicesÚerrorr   ÚmsgÚdirtyÚinsertr   Úcmpltn_menu_visibleÚcmpltn_message_visiblerA   r   Úcmpltn_menu_endr6   r7   Úcmpltn_menu)Úselfr>   Úlast_is_completerÚimmutable_completionsÚcompletions_unchangableÚstemÚcompletionsÚps           r   ÚdoÚcomplete.do§   sh   àKKØ×-Ñ-¨d¯n©nÓ=ÐØ !× >Ñ >ÐØ"3×"MÐ8MÐØzz|Þ&Ø$%×$5Ñ$5°dÓ$;AÔ!à×+Ñ+ÞØGGLÕ!ÜÓ Ó"Þ&¬3¨{¸1©~Ó+>Ä#ÀdÃ)Ó+KØ-ØØHH[ ^¤C¨£I JÐ/Õ0ä{¤C¨£IÓ.AÞØÞ Ø(,Ô%Ø+0Ô(Ü3=ØII{×,=Ñ,=ØNN A×$4Ñ$4ó46Ñ0qÔ0ð Ø×*×*Ø+/Ô(Ø8{Ó*Ø9AEØ"AGà,AEØ"AGð +r   © N©ÚreturnÚNone©Ú__name__Ú
__module__Ú__qualname__Ú__firstlineno__r[   Ú__static_attributes__r]   r   r   rC   rC   ¦   s    ÷$#r   rC   c                  ó    \ rS rSrSS jrSrg)Úself_insertéÎ   c                óô   U R                   n[        R                  R                  U 5        UR                  (       a·  UR                  5       n[        U5      S:  a  UR                  5         g UR                   Vs/ s H  nUR                  U5      (       d  M  UPM     nnU(       a;  [        UR                  USUR                  UR                  5      u  Ul        Ul        g UR                  5         g g s  snf r   )r	   r   rh   r[   rP   rI   r   Úcmpltn_resetrK   Ú
startswithrA   r   r6   r7   rS   rR   )rT   r>   rX   ÚwrY   s        r   r[   Úself_insert.doÏ   s¾    àKKä×Ñ×Ñ Ô%Ø× × Ø::<DÜ4y1}ØÕ à*+×*?Ò*?ó 6Ò*? QØ"#§,¡,¨t×"4÷  !Ñ*?ð 6æÜ7AØ		 ;°Ø¨×(8Ñ(8ó8:Ñ4AM 1Õ#4ð NNÕ$ð !ùò
6s   Á;C5ÂC5r]   Nr^   ra   r]   r   r   rh   rh   Î   s    ÷%r   rh   c                  ó
  ^  \ rS rSr% SrSrSrSr\" SS9r	S\
S'   \" SS9rS\
S	'   \" SS9rS\
S
'   \" SS9rS\
S'   \" SS9rS\
S'   SU 4S jjrSU 4S jjrSU 4S jjrSU 4S jjrSU 4S jjrSS jrSS jrSS jrSrU =r$ )ÚCompletingReaderéã   zAdds completion supportTF)Úinitú	list[str]rS   ÚboolrP   rQ   r/   rR   rK   c                óè   > [         TU ]  5         U R                  5         [        [        4 HC  nXR
                  UR                  '   XR
                  UR                  R                  SS5      '   ME     g )NÚ_Ú-)ÚsuperÚ__post_init__rk   rC   rh   r   rb   Úreplace)rT   ÚcrG   s     r   ry   ÚCompletingReader.__post_init__ô   sV   ø ÜÑÔØ×ÑÔÜKÓ(AØ()MM!**Ñ%Ø:;MM!**×,Ñ,¨S°#Ó6Ó7ò )r   c                ó&   > [         TU ]  5       S-   $ )N))z\trC   )rx   Úcollect_keymap©rT   rG   s    r   r~   ÚCompletingReader.collect_keymapû   s   ø ÜwÑ%Ó'ð +"ñ "ð 	"r   c                ó|   > [         TU ]  U5        [        U[        [        45      (       d  U R                  5         g g r   )rx   Úafter_commandÚ
isinstancerC   rh   rk   )rT   ÚcmdrG   s     r   r   ÚCompletingReader.after_commandÿ   s3   ø ÜÑcÔ"Ü#¤¬+Ð6×7Ñ7Ø×ÑÕð 8r   c                ó  > [         TU ]  5       nU R                  (       aj  U R                  S   S-   nU R                  XU& U R
                  [        U R                  5      :w  a'  S/ 4/[        U R                  5      -  U R                  X"& U$ r   )	rx   Úcalc_screenrP   ÚlxyrS   Úposr   ÚbufferÚ
screeninfo)rT   ÚscreenÚlyrG   s      r   r   ÚCompletingReader.calc_screen  sy   ø ÜÑ$Ó&Ø×#×#à!qBØ ×,Ñ,FbMð
 xx3t{{Ó+Ó+Ø+,¨b¨'¨´3°t×7GÑ7GÓ3HÑ)H Ð&Ør   c                óB   > [         TU ]  5         U R                  5         g r   )rx   Úfinishrk   r   s    r   r   ÚCompletingReader.finish  s   ø ÜÔØ×ÑÕr   c                óJ    / U l         SU l        SU l        SU l        / U l        g )NFr   )rS   rP   rQ   rR   rK   )rT   s    r   rk   ÚCompletingReader.cmpltn_reset  s*    ØÔØ#(Ô Ø&+Ô#Ø ÔØ#%Õ r   c                ó6   U R                   n[        R                  nU R                  nU R                  S-
  nUS:¼  a=  UR                  X4   U5      U:X  a%  US-  nUS:¼  a  UR                  X4   U5      U:X  a  M%  SR                  X4S-   U R                   5      $ )Nr   r   r   )Úsyntax_tabler	   ÚSYNTAX_WORDr   r   Úgetr2   )rT   ÚstÚSWÚbrZ   s        r   rI   ÚCompletingReader.get_stem  s    Ø×ÑÜ×ÑØKKØHHqLØ1f ¡ bÓ)¨RÓ/ØFAð 1f ¡ bÓ)¨RÕ/àwwq1TXXÓ'Ð'r   c                ó    / $ r   r]   )rT   rX   s     r   rJ   Ú CompletingReader.get_completions&  s    Ø	r   )rS   rK   rR   rP   rQ   r^   )r_   z'tuple[tuple[KeySpec, CommandName], ...])r   ÚCommandr_   r`   )r_   rs   )r_   Ústr)rX   r   r_   rs   )rb   rc   rd   re   Ú__doc__rH   r6   r7   r   rS   Ú__annotations__rP   rQ   rR   rK   ry   r~   r   r   r   rk   rI   rJ   rf   Ú__classcell__)rG   s   @r   rp   rp   ã   s   ø á!ð $(Ð ØLØNñ #¨Ñ.KÓ.Ù %¨5Ñ 1ÐÓ1Ù#(¨eÑ#4ÐDÓ4Ù  eÑ,OSÓ,Ù%*°Ñ%6ÐÓ6÷<÷"÷ ÷
÷ô&ô(÷ò r   rp   )r   )r   rs   r   r/   r_   r   )r   r   r_   r   )r   r   r_   r/   )r   r   r#   r/   r_   r   )r4   zconsole.Consoler   rs   r5   r/   r6   rt   r7   rt   r_   ztuple[list[str], int])Ú
__future__r   Údataclassesr   r   Úrer   r   r   r	   r
   r   ÚtypesÚKeySpecÚCommandNamer   Úcompiler   r   r    r&   rA   rC   rh   rp   r]   r   r   Ú<module>rª      sÐ   ðõ* #ç (ã 	ß 'Ñ 'Ý ð ×
Ñ
Øöð  ::ÐGÓHÐ ô'ôôð-Øð-àð-ð ð-ð ð	-ð
 ð-ð ô-ô~%#x×Ñô %#ôP%(×&Ñ&ô %ð* ôCvó Có ñCr                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ó
    F\hÒ  ã                  óò    S SK Jr  S SKrS SKJrJr  S SKrS SKrS SKrS SK	J
r
Jr  S SKrS SKrSr\(       a  S SKJr  S SKJr  \
 " S S	5      5       r\
 " S
 S\5      5       r " S S\R*                  5      rg)é    )ÚannotationsN)ÚABCÚabstractmethod)Ú	dataclassÚfieldF)ÚIO)ÚCallablec                  ó8    \ rS rSr% S\S'   S\S'   SrS\S'   Srg	)
ÚEventé(   ÚstrÚevtÚdataó    ÚbytesÚraw© N)Ú__name__Ú
__module__Ú__qualname__Ú__firstlineno__Ú__annotations__r   Ú__static_attributes__r   r   Ú&/usr/lib/python3.13/_pyrepl/console.pyr   r   (   s    à	HØ
IØCÖr   r   c                  óÎ   \ rS rSr% S\S'   \" \S9rS\S'   SrS\S	'   S
r	S\S'       S        S!S jjr
\S"S j5       r\S#S j5       r\S#S j5       r\S$S j5       r\S%S j5       r\S&S j5       r\S'S(S jj5       r\S)S j5       r\S#S j5       r\S#S j5       r\S#S j5       r\S#S j5       r\S#S j5       r\S*S j5       r\S+S j5       r\S,S j5       r\S#S j5       rSrg)-ÚConsoleé/   útuple[int, int]Úposxy)Údefault_factoryú	list[str]Úscreené   ÚintÚheightéP   Úwidthc                ó   U=(       d    [         R                  " 5       U l        [        U[        5      (       a  Xl        OUR                  5       U l        [        U[        5      (       a  X l        g UR                  5       U l        g ©N)ÚsysÚgetdefaultencodingÚencodingÚ
isinstancer$   Úinput_fdÚfilenoÚ	output_fd)ÚselfÚf_inÚf_outÚtermr,   s        r   Ú__init__ÚConsole.__init__6   sW    ð !×<¤C×$:Ò$:Ó$<ädC× Ñ Ø Mà KKMDMäeS×!Ñ!Ø"Nà"\\^DNr   c                ó    g r)   r   )r1   r"   Úxys      r   ÚrefreshÚConsole.refreshI   s    ØGJr   c                ó    g r)   r   ©r1   s    r   ÚprepareÚConsole.prepareL   ó    Ø"r   c                ó    g r)   r   r<   s    r   ÚrestoreÚConsole.restoreO   r?   r   c                ó    g r)   r   )r1   ÚxÚys      r   Úmove_cursorÚConsole.move_cursorR   s    Ø36r   c                ó    g r)   r   )r1   Úvisibles     r   Úset_cursor_visÚConsole.set_cursor_visU   s    Ø58r   c                ó    g)zlReturn (height, width) where height and width are the height
and width of the terminal window in characters.Nr   r<   s    r   ÚgetheightwidthÚConsole.getheightwidthX   ó    ð 	r   c                ó    g)zReturn an Event instance.  Returns None if |block| is false
and there is no event pending, otherwise waits for the
completion of an event.Nr   )r1   Úblocks     r   Ú	get_eventÚConsole.get_event^   ó    ð
 	r   c                ó    g)z.
Push a character to the console event queue.
Nr   )r1   Úchars     r   Ú	push_charÚConsole.push_chare   rT   r   c                ó    g r)   r   r<   s    r   ÚbeepÚConsole.beepl   s    Ør   c                ó    g)zWipe the screenNr   r<   s    r   ÚclearÚConsole.clearo   ó    ð 	r   c                ó    g)zsMove the cursor to the end of the display and otherwise get
ready for end.  XXX could be merged with restore?  Hmm.Nr   r<   s    r   ÚfinishÚConsole.finisht   rO   r   c                ó    g)zTFlush all output to the screen (assuming there's some
buffering going on somewhere).Nr   r<   s    r   ÚflushoutputÚConsole.flushoutputz   rO   r   c                ó    g)z0Forget all pending, but not yet processed input.Nr   r<   s    r   ÚforgetinputÚConsole.forgetinput   r_   r   c                ó    g)zAReturn the characters that have been typed but not yet
processed.Nr   r<   s    r   Ú
getpendingÚConsole.getpending   rO   r   c                ó    g)z®Wait for an event. The return value is True if an event is
available, False if the timeout has been reached. If timeout is
None, wait forever. The timeout is in milliseconds.Nr   )r1   Útimeouts     r   ÚwaitÚConsole.wait   rT   r   c                ó    g)zReturns the current input hook.Nr   r<   s    r   Ú
input_hookÚConsole.input_hook   r_   r   c                ó    g r)   r   r<   s    r   ÚrepaintÚConsole.repaint   r?   r   )r,   r.   r0   N)r   é   Ú rw   )r2   úIO[bytes] | intr3   rx   r4   r   r,   r   )r"   r!   r8   r   ÚreturnÚNone)ry   rz   )rD   r$   rE   r$   ry   rz   )rI   Úboolry   rz   )ry   r   )T)rQ   r{   ry   zEvent | None)rV   zint | bytesry   rz   )ry   r   )rm   zfloat | Nonery   r{   )ry   zCallable[[], int] | None)r   r   r   r   r   r   Úlistr"   r%   r'   r5   r   r9   r=   rA   rF   rJ   rM   rR   rW   rZ   r]   ra   rd   rg   rj   rn   Úpropertyrq   rt   r   r   r   r   r   r   /   s   àÓÙ¨dÑ3FIÓ3ØFCÓØE3Oð !"Ø!"ØØð,àð,ð ð,ð ð	,ð
 õ,ð& ÛJó ØJàÛ"ó Ø"àÛ"ó Ø"àÛ6ó Ø6àÛ8ó Ø8àóó ðð
 õó ðð óó ðð Ûó Øàóó ðð óó ðð
 óó ðð
 óó ðð óó ðð
 óó ðð óó ðð Û"ó Û"r   r   c                  ó~   ^  \ rS rSr\" 5       r  S
SS.       SU 4S jjjjrSU 4S jjrS rS r	SS jr
S	rU =r$ )ÚInteractiveColoredConsoleé   F)Ú
local_exitc               óV   > [         TU ]  XUS9  [        R                  " 5       U l        g )N)ÚlocalsÚfilenamer   )Úsuperr5   Ú	_colorizeÚcan_colorize)r1   r   r   r   Ú	__class__s       r   r5   Ú"InteractiveColoredConsole.__init__   s(   ø ô 	Ñ ÀjÐÑQÜ%×2Ò2Ó4Õr   c                ó*   > [         TU ]  " SSU0UD6  g )Nr   r   )r   Úshowsyntaxerror)r1   r   Úkwargsr   s      r   r   Ú)InteractiveColoredConsole.showsyntaxerror¨   s   ø ÜÒÑ<¨Ð<°VÓ<r   c                ó    SS K nUR                  XUU R                  UR                  S9nU R	                  SR                  U5      5        g )Nr   )ÚcolorizeÚlimitrw   )Ú	tracebackÚformat_exceptionr   ÚBUILTIN_EXCEPTION_LIMITÚwriteÚjoin)r1   ÚtypÚvalueÚtbr   Úliness         r   Ú_excepthookÚ%InteractiveColoredConsole._excepthook«   sG    ÛØ×*Ñ*ØBØ×*Ñ*Ø×7Ñ7ð +ð 9ð 	

2775>Õ"r   c                ó     [        XR                  5        g ! [         a    e [         a    U R	                  5         U R
                  s $ f = fr)   )Úexecr   Ú
SystemExitÚBaseExceptionÚshowtracebackÚSTATEMENT_FAILED)r1   Úcodes     r   ÚruncodeÚ!InteractiveColoredConsole.runcode³   sL    ð	)Ü{{Ô#ð øô ó 	ØÜó 	)Ø×ÑÔ Ø×(Ñ(Ò(ð	)ús    0AÁ
Ac                ón    U R                   R                  UUS[        R                  SS9nUR                  (       a  UR                  Gt pVUR                   H  nUWL a  [        R                  O[        R                  nXvL a  UOSn	U" U/5      n
 U R                   R                  X¢U	5      n[        R                  " X±U5        Uc    g	U R)                  U5      nXàR*                  L d  M    g   g! [        [
        [        4 a    U R                  X!S9   gf = f! [         ao  nUR                  S   S:X  aB  [        R                  R!                  ["        R$                  5      nUR'                  SU S35        U R                  X!S9   S nA  gS nAf[
        [        4 a    U R                  X!S9     gf = f)
Nr   F)Úincomplete_input)Úsourcer   z'await' outside functionzTry the asyncio REPL (zG -m asyncio) to use top-level 'await' and run background asyncio tasks.T)ÚcompileÚcompilerÚastÚP